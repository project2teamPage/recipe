<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragment/default}">

<th:block layout:fragment="css">
    <link rel="stylesheet" th:href="@{/css/post/detail.css}">
</th:block>
<th:block layout:fragment="script"></th:block>

<div layout:fragment="main" id="main">

    <div class="container mt-4">
        <h2 th:text="${post.title}">제목</h2>
        <p class="text-muted">
            작성자: <span th:text="${post.nickName}">작성자</span> |
            작성일: <span th:text="${#temporals.format(post.uploadDate, 'yyyy-MM-dd HH:mm')}">날짜</span> |
            조회수: <span th:text="${post.viewCount}">0</span>
        </p>

        <hr/>

        <!-- 게시글 내용 출력 -->
        <div th:utext="${post.content}"></div>

        <hr/>

        <!-- 좋아요 -->
        <div class="like-section">
            <span>❤️ 좋아요</span>
            <span th:text="${post.postLikes}">0</span>
        </div>

        <!-- 추가 버튼 (수정, 삭제 등) -->
        <div>
            <a th:href="@{/post/edit/{id}(id=${post.id})}" class="btn btn-primary">수정</a>
            <a th:href="@{/post/delete/{id}(id=${post.id})}" class="btn btn-danger">삭제</a>
            <a th:href="@{/post}" class="btn btn-secondary">목록</a>
        </div>

    </div>

    <!-- 댓글 -->
    <div class="comments">
        <h5>댓글 <span th:text="${#lists.size(post.postCommentDtoList)}">0</span></h5>
        <ul>
            <li th:each="comment : ${post.postCommentDtoList}">
                <div class="comment-header">
                    <strong th:text="${comment.nickName}">닉네임</strong>
                    <small th:text="${#temporals.format(comment.uploadDate, 'yyyy.MM.dd HH:mm:ss')}">날짜</small>
                </div>
                <p th:text="${comment.content}">내용</p>
            </li>
        </ul>

        <form th:action="@{/post/{id}/comment(id=${post.id})}" th:object="${newComment}" method="post">
            <textarea th:field="*{content}" placeholder="댓글을 입력하세요"></textarea>
            <button type="submit">등록</button>
        </form>

    </div>



</div>
</html>